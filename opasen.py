#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os
import sys
import re
import time
from colorama import init, Fore, Style

# Инициализация цветов
init(autoreset=True)
RED = Fore.RED + Style.BRIGHT
MENU_COLOR = Fore.RED + Style.BRIGHT

BANNER = RED + r"""

 ██████╗ ██████╗  █████╗ ███████╗███████╗███╗   ██╗
██╔═══██╗██╔══██╗██╔══██╗██╔════╝██╔════╝████╗  ██║
██║   ██║██████╔╝███████║███████╗█████╗  ██╔██╗ ██║
██║   ██║██╔═══╝ ██╔══██║╚════██║██╔══╝  ██║╚██╗██║
╚██████╔╝██║     ██║  ██║███████║███████╗██║ ╚████║
 ╚═════╝ ╚═╝     ╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═══╝
 
""" + Style.RESET_ALL

# База кодов городов и операторов
CITY_CODES = {
    '495': 'Москва',
    '499': 'Москва',
    '812': 'Санкт-Петербург',
    '383': 'Новосибирск',
    '343': 'Екатеринбург',
    '384': 'Кемерово',
    '345': 'Тюмень',
    '385': 'Барнаул',
    '395': 'Иркутск',
    '381': 'Омск',
    '863': 'Ростов-на-Дону',
    '841': 'Пенза',
    '473': 'Воронеж',
    '483': 'Брянск',
    '492': 'Иваново',
    '831': 'Нижний Новгород',
    '846': 'Самара',
    '845': 'Саратов',
    '401': 'Калининград',
    '484': 'Калуга',
    '487': 'Тула',
    '471': 'Курск',
    '472': 'Белгород',
    '474': 'Липецк',
    '475': 'Тамбов',
    '481': 'Смоленск',
    '482': 'Тверь',
    '485': 'Кострома',
    '486': 'Орел',
    '491': 'Рязань',
    '493': 'Ярославль',
    '494': 'Кострома',
    '800': 'Бесплатные номера',
    '900': 'Мобильные номера',
    '901': 'Мобильные номера',
    '902': 'Мобильные номера',
    '903': 'Мобильные номера',
    '904': 'Мобильные номера',
    '905': 'Мобильные номера',
    '906': 'Мобильные номера',
    '907': 'Мобильные номера',
    '908': 'Мобильные номера',
    '909': 'Мобильные номера',
    '910': 'Мобильные номера',
    '911': 'Мобильные номера',
    '912': 'Мобильные номера',
    '913': 'Мобильные номера',
    '914': 'Мобильные номера',
    '915': 'Мобильные номера',
    '916': 'Мобильные номера',
    '917': 'Мобильные номера',
    '918': 'Мобильные номера',
    '919': 'Мобильные номера',
    '920': 'Мобильные номера',
    '921': 'Мобильные номера',
    '922': 'Мобильные номера (Мегафон)',
    '923': 'Мобильные номера (Мегафон)',
    '924': 'Мобильные номера (Мегафон)',
    '925': 'Мобильные номера (МТС)',
    '926': 'Мобильные номера (МТС)',
    '927': 'Мобильные номера (МТС)',
    '928': 'Мобильные номера (Билайн)',
    '929': 'Мобильные номера (Билайн)',
    '930': 'Мобильные номера (Билайн)',
    '931': 'Мобильные номера',
    '932': 'Мобильные номера',
    '933': 'Мобильные номера',
    '934': 'Мобильные номера',
    '935': 'Мобильные номера',
    '936': 'Мобильные номера',
    '937': 'Мобильные номера',
    '938': 'Мобильные номера',
    '939': 'Мобильные номера',
    '941': 'Мобильные номера',
    '950': 'Мобильные номера',
    '951': 'Мобильные номера',
    '952': 'Брянск',
    '953': 'Мобильные номера',
    '954': 'Мобильные номера',
    '955': 'Мобильные номера',
    '956': 'Мобильные номера',
    '958': 'Мобильные номера',
    '960': 'Мобильные номера',
    '961': 'Мобильные номера',
    '962': 'Мобильные номера',
    '963': 'Мобильные номера',
    '964': 'Мобильные номера',
    '965': 'Мобильные номера',
    '966': 'Мобильные номера',
    '967': 'Мобильные номера',
    '968': 'Мобильные номера',
    '969': 'Мобильные номера',
    '970': 'Мобильные номера',
    '971': 'Мобильные номера',
    '980': 'Мобильные номера',
    '981': 'Мобильные номера',
    '982': 'Мобильные номера',
    '983': 'Мобильные номера',
    '984': 'Мобильные номера',
    '985': 'Мобильные номера',
    '986': 'Мобильные номера',
    '987': 'Мобильные номера',
    '988': 'Мобильные номера',
    '989': 'Мобильные номера',
    '991': 'Мобильные номера',
    '992': 'Мобильные номера',
    '993': 'Мобильные номера',
    '994': 'Мобильные номера',
    '995': 'Мобильные номера',
    '996': 'Мобильные номера',
    '997': 'Мобильные номера',
    '999': 'Мобильные номера'
}

def clear_screen():
    """Очищает экран"""
    os.system('clear')

def draw_menu():
    """Отображает меню"""
    clear_screen()
    print(BANNER)
    print(MENU_COLOR + "┌───────────────────────────────┐")
    print(MENU_COLOR + "│          МЕНЮ                │")
    print(MENU_COLOR + "├───────────────────────────────┤")
    print(MENU_COLOR + "│ 1. ПОИСК НОМЕРА              │")
    print(MENU_COLOR + "│ 2. ВЫХОД                     │")
    print(MENU_COLOR + "└───────────────────────────────┘")

def get_phone_info(phone):
    """Получает информацию о номере"""
    try:
        cleaned_phone = re.sub(r'\D', '', phone)  # Удаляем нецифровые символы
        if len(cleaned_phone) == 11:
            code = cleaned_phone[1:4]  # Берем код города (первые 3 цифры после 8 или +7)
        else:
            code = cleaned_phone[:3]  # Для коротких номеров берем первые 3 цифры

        city = CITY_CODES.get(code, "Неизвестно")
        operator = "Мобильный оператор"
        if code in ['922', '923', '924']:
            operator = "ПАО 'Мегафон'"
        elif code in ['925', '926', '927']:
            operator = "ПАО 'МТС'"
        elif code in ['928', '929', '930']:
            operator = "ПАО 'Билайн'"

        region = "Европа" if code in ['495', '499', '812', '813', '815', '816', '817', '818', '831', '833', '834', '835', '836', '841', '842', '843', '844', '845', '846', '847', '848', '851', '855', '863', '865', '866', '867', '869', '871', '872', '873', '877', '878', '879'] else "Азия"
        postal_code = str(100000 + int(code) * 10)[:6]  # Генерация почтового индекса
        auto_code = code[:2] if len(code) >= 2 else "00"  # Код региона авто

        return {
            "Оператор": operator,
            "Страна": "Россия",
            "Регион": region,
            "Город": city,
            "Почтовый индекс": postal_code,
            "Код валюты": "643",
            "Телефонные коды": code,
            "Гос. номер региона авто": auto_code
        }
    except Exception as e:
        print(RED + f"Ошибка: {e}")
        return None

def number_search():
    """Поиск информации о номере"""
    clear_screen()
    print(MENU_COLOR + "┌───────────────────────────────┐")
    print(MENU_COLOR + "│        ПОИСК НОМЕРА          │")
    print(MENU_COLOR + "├───────────────────────────────┤")
    phone = input(MENU_COLOR + "│ ВВЕДИТЕ НОМЕР: ")
    print(MENU_COLOR + "└───────────────────────────────┘")
    print(RED + "\nПоиск информации...")
    time.sleep(2)  # Имитация поиска
    result = get_phone_info(phone)
    if result:
        print(RED + f"\n┌ ИСТОЧНИК OPASEN")
        print(RED + f"├ ОПЕРАТОР: {result['Оператор']}")
        print(RED + f"├ СТРАНА: {result['Страна']}")
        print(RED + f"├ РЕГИОН: {result['Регион']}")
        print(RED + f"├ ГОРОД: {result['Город']}")
        print(RED + f"├ ПОЧТОВЫЙ ИНДЕКС: {result['Почтовый индекс']}")
        print(RED + f"├ КОД ВАЛЮТЫ: {result['Код валюты']}")
        print(RED + f"├ ТЕЛЕФОННЫЕ КОДЫ: {result['Телефонные коды']}")
        print(RED + f"└ ГОС. НОМЕР РЕГИОНА АВТО: {result['Гос. номер региона авто']}\n")
    else:
        print(RED + "\nНомер не найден.\n")
    input(RED + "Нажмите ENTER для возврата в меню...")

def main():
    """Главная функция программы"""
    while True:
        draw_menu()
        choice = input(RED + "Введите номер пункта: ")
        if choice == "1":
            number_search()
        elif choice == "2":
            print(RED + "Выход из программы...")
            time.sleep(1)
            sys.exit()
        else:
            print(RED + "Неверный выбор!")
            time.sleep(1)

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\nПрограмма завершена.")
        sys.exit()

